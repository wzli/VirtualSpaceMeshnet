namespace vsm;

struct Vec2 {
  x:float32;
  y:float32;
}

table NodeInfo {
  name:string;
  address:string (key);
  coordinates:Vec2;
  sequence:uint32;
}

table Message {
  timestamp:uint32;
  range:float;
  expiry:uint32;
  priority:uint8;
  source:NodeInfo;
  peers:[NodeInfo];
  states:[State];
}

enum SyncMode:uint8 {
  AUTHORITY,
  LATEST,
  NEAREST,
  // AVERAGE,
  CUSTOM,
}

table State {
  sync_mode:SyncMode;
  expiry:uint32;
  name:string (key);
  type:uint32;
  data:[uint8];
}
